# JOIN
Многотабличные запросы. Объединение таблиц через JOIN в MySQL. Вместо JOIN можно использовать два и более запроса.

Пример, выводим список товаров на странице и указывает к какой категории относится данный товар. В этом запросе участвуют две таблицы. В таблице products, есть только id категории в поле id_cat.

Пример запроса:

```sql
SELECT * FROM `products` JOIN `cats`;
```

- SELECT * FROM `products` JOIN `cats` - таблицу продукты объединить с таблицой категорий

```sql
SELECT * FROM `products` JOIN `cats` ON products.id_cat = cats.id_cat;
```

Если имена полей в разных таблицах одинаковы, то можно записать так:

```sql
SELECT * FROM `products` JOIN `cats` USING (id_cat);
```

По-умолчанию происходит INNER JOIN.  
Чаще всего используют LEFT JOIN.  
JOIN в строке запроса может быть больше одного, соответственно джойнятся более двух таблиц и в выводе появляется больше столбцов, ото всех таблиц.  
Джойнить можно и не связанные таблицы по имени столбца.

При нескольких джойнах можно выбирать какие столбцы появятся:

```sql
SELECT shops.*, cost FROM `products` JOIN shops_products USING (id_product) JOIN shops using (id_shop);
SELECT shops.*, cost FROM `products` JOIN shops_products USING (id_product) JOIN shops using (id_shop) WHERE id_product = '1';
```

- первая строка вывведет все строки
- вторая строка выведет строки с id_product = '1'
- в первой строке выведутся все столбцы из всех 3х таблиц
- во второй строке выведутся все столбцы из таблицы shops и столбец cost


## Что такое JOIN?
JOIN — это оператор SQL, который объединяет данные из двух или более таблиц на основе общих столбцов. Это позволяет извлекать данные из разных таблиц и комбинировать их в один результирующий набор данных.

Существует несколько видов JOIN, каждый из которых служит своей цели

### INNER JOIN
Оператор `INNER JOIN` выбирает записи, которые имеют совпадающие значения в обеих таблицах. То есть, если в одной таблице есть запись, которой нет в другой, такая запись не попадет в итоговый результат.

Предположим, у нас есть две таблицы: `students` и `courses`.

```sql
-- Таблица students
+----+------------+
| id | name       |
+----+------------+
|  1 | Иван       |
|  2 | Мария      |
|  3 | Сергей     |
+----+------------+

-- Таблица courses
+---------+------------+
| student | course     |
+---------+------------+
|       1 | Математика |
|       1 | История    |
|       2 | Литература |
+---------+------------+
```

Теперь давайте объединим эти таблицы с помощью `INNER JOIN`:

```sql
SELECT students.name, courses.course
FROM students
INNER JOIN courses ON students.id = courses.student;
```

Результат:

```sql
+------------+------------+
| name       | course     |
+------------+------------+
| Иван       | Математика |
| Иван       | История    |
| Мария      | Литература |
+------------+------------+
```

Обратите внимание, что студент Сергей отсутствует в результате, потому что у него нет записей в таблице `courses`.

### LEFT JOIN
Оператор `LEFT JOIN` возвращает все записи из левой таблицы (таблицы, указанной слева от оператора JOIN) и соответствующие им записи из правой таблицы. Если в правой таблице нет соответствующей записи, вместо нее будут подставлены NULL-значения.

Используем те же самые таблицы `students` и `courses`:

```sql
SELECT students.name, courses.course
FROM students
LEFT JOIN courses ON students.id = courses.student;
```

Результат:

```sql
+------------+------------+
| name       | course     |
+------------+------------+
| Иван       | Математика |
| Иван       | История    |
| Мария      | Литература |
| Сергей     | NULL       |
+------------+------------+
```

Здесь видно, что Сергей присутствует в результатах, несмотря на отсутствие записей в таблице `courses`.

### RIGHT JOIN
Оператор `RIGHT JOIN` аналогичен `LEFT JOIN`, но возвращает все записи из правой таблицы и соответствующие им записи из левой таблицы. Если в левой таблице нет соответствующей записи, вместо нее будут подставлены NULL-значения.

**Пример:**

```sql
SELECT students.name, courses.course
FROM students
RIGHT JOIN courses ON students.id = courses.student;
```

Результат:

```sql
+------------+------------+
| name       | course     |
+------------+------------+
| Иван       | Математика |
| Иван       | История    |
| Мария      | Литература |
| NULL       | Биология   |
+------------+------------+
```

Предположим, что в таблице `courses` есть еще одна запись:

```sql
+---------+-------------+
| student | course      |
+---------+-------------+
|       1 | Математика  |
|       1 | История     |
|       2 | Литература  |
|    NULL | Биология    |
+---------+-------------+
```

Тогда `RIGHT JOIN` покажет все курсы, даже если у них нет соответствующего студента.

### FULL OUTER JOIN

Оператор `FULL OUTER JOIN` возвращает все записи из обеих таблиц, дополнив отсутствующие записи значениями NULL. К сожалению, в MySQL нет прямого эквивалента `FULL OUTER JOIN`, но его можно эмулировать с использованием `UNION`.

```sql
SELECT students.name, courses.course
FROM students
LEFT JOIN courses ON students.id = courses.student

UNION

SELECT students.name, courses.course
FROM students
RIGHT JOIN courses ON students.id = courses.student;
```

### Заключение
Операторы JOIN очень полезны для извлечения данных из нескольких таблиц, особенно в случае сложных взаимосвязей между ними. Понимание принципов работы каждого вида JOIN поможет вам эффективно управлять данными в ваших проектах.
