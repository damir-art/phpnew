# Регулярные выражения
Регулярные выражения в PHP.

**Регулярные выражения** (или **регэкспы**) — это мощный инструмент для поиска, замены и обработки текста на основе шаблонов. В PHP они реализованы через функции `preg_*`, где каждая функция выполняет определённую операцию с использованием регулярных выражений.

## Основные функции работы с регулярными выражениями в PHP

- `preg_match`: ищет совпадение заданного шаблона в строке.
- `preg_replace`: заменяет найденные совпадения новым значением.
- `preg_split`: разбивает строку на части по указанному шаблону.
- `preg_grep`: фильтрует массив по регулярному выражению.
- `preg_quote`: экранирует специальные символы в строке перед использованием её в качестве регулярного выражения.
- `preg_last_error`: возвращает информацию об ошибке последней операции с регулярным выражением.

## Популярные примеры использования регулярных выражений в PHP

### Проверка электронной почты
Проверяем, соответствует ли введённая строка формату email-адреса:

```php
$email = 'example@example.com';
if (preg_match('/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/', $email)) {
  echo "Email адрес корректен.";
} else {
  echo "Некорректный email адрес.";
}
```

### Проверка URL
Проверяем, является ли строка валидным URL:

```php
$url = 'https://www.example.com/';
if (preg_match('~^(?:(?:https?)://)(?:\S+(?::\S*)?@)?((?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:/[^\s]*)?$~i', $url)) {
  echo "URL корректен.";
} else {
  echo "Некорректный URL.";
}
```

### Удаление HTML-тегов
Удаляем все HTML-теги из строки:

```php
$html = '<p>Это <b>пример</b> текста.</p>';
$cleanText = preg_replace('/<[^>]*>/', '', $html);
echo $cleanText; // Выведет: Это пример текста.
```

### Замена всех пробелов на дефисы
Заменим все пробелы в строке на дефисы:

```php
$string = 'Пример строки с пробелами';
$newString = preg_replace('/\s+/', '-', $string);
echo $newString; // Выведет: Пример-строки-с-пробелами
```

### Поиск IP-адресов
Находим все IP-адреса в тексте:

```php
$text = '192.168.1.100 is an example of an IPv4 address.';
$matches = [];
if (preg_match_all('/(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})/', $text, $matches)) {
  print_r($matches[0]); // Выведет: Array ( [0] => 192.168.1.100 )
}
```

### Проверка пароля на сложность
Проверяем пароль на соответствие минимальным требованиям сложности (минимум 8 символов, хотя бы одна цифра, заглавная буква и специальный символ):

```php
$password = 'P@ssw0rd!';
if (preg_match('/^(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])[a-zA-Z0-9!@#$%^&*]{8,}$/', $password)) {
  echo "Пароль достаточно сложный.";
} else {
  echo "Пароль недостаточно сложный.";
}
```

### Извлечение доменного имени из URL
Извлекаем доменное имя из полного URL:

```php
$url = 'https://www.example.com/path/to/file.html';
if (preg_match('/^(https?:\/\/)?([^\/]+)/i', $url, $match)) {
  echo $match[2]; // Выведет: www.example.com
}
```

### Преобразование первой буквы каждого слова в верхний регистр
Преобразуем первую букву каждого слова в строке в верхний регистр:

```php
$string = 'это пример строки';
$upperCaseWords = preg_replace_callback('/\b\w/', function ($matches) {
  return strtoupper($matches[0]);
}, $string);
echo $upperCaseWords; // Выведет: Это Пример Строки
```

### Проверка на наличие русских букв
Проверяем, содержит ли строка русские буквы:

```php
$string = 'Этот текст содержит русские буквы';
if (preg_match('/[\p{Cyrillic}]/u', $string)) {
  echo "Строка содержит русские буквы.";
} else {
  echo "Строка не содержит русских букв.";
}
```

### Замена всех повторяющихся пробелов одним
Убираем лишние пробелы между словами:

```php
$string = 'Пример   строки     с лишними      пробелами';
$trimmedString = preg_replace('/ {2,}/', ' ', $string);
echo $trimmedString; // Выведет: Пример строки с лишними пробелами
```

Эти примеры показывают, насколько универсальными и мощными являются регулярные выражения в PHP. Они позволяют решать множество задач, связанных с обработкой текста, будь то проверка ввода, очистка данных или сложные преобразования.
